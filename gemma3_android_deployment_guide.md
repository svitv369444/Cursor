# Руководство по запуску Gemma 3 локально на Android

## Обзор
Gemma 3 - это семейство языковых моделей от Google, которые можно запускать локально на Android устройствах. Это руководство покрывает несколько способов развертывания моделей Gemma 3 на вашем Android устройстве.

## Доступные модели Gemma 3

### Размеры моделей:
- **Gemma 3 2B** - Компактная модель, подходящая для большинства Android устройств
- **Gemma 3 9B** - Средняя модель, требует устройства с 8+ ГБ RAM
- **Gemma 3 27B** - Большая модель, требует мощного устройства с 12+ ГБ RAM

### Оптимизированные версии:
- **Gemma 3n** - Специально оптимизированная версия для мобильных устройств
- **Quantized версии** - 4-bit и 8-bit квантованные модели для экономии памяти

## Метод 1: Google AI Edge Gallery (Рекомендуется)

### Системные требования:
- Android 12 или выше
- Минимум 4 ГБ RAM для 2B модели
- Минимум 8 ГБ RAM для 9B модели
- 4-8 ГБ свободного места для хранения модели
- Процессор ARM с поддержкой NPU/GPU (рекомендуется)

### Установка:

1. **Скачивание APK:**
   ```bash
   # Перейдите на GitHub: https://github.com/google-ai-edge/ai-edge-gallery
   # Скачайте последнюю версию APK из раздела Releases
   ```

2. **Установка:**
   - Включите "Установка из неизвестных источников" в настройках Android
   - Установите загруженный APK файл

3. **Загрузка модели:**
   - Откройте Google AI Edge Gallery
   - Выберите "Text Generation" или "Chat"
   - Найдите модель Gemma 3 в списке
   - Нажмите "Download & Try"
   - Подтвердите условия использования на Hugging Face

### Использование:
- После загрузки модель будет доступна в приложении
- Выберите загруженную модель для генерации текста
- Модель работает полностью офлайн

## Метод 2: MLC Chat

### Установка:

1. **Скачивание:**
   - Перейдите на: https://github.com/mlc-ai/mlc-llm
   - Скачайте MLC Chat APK из releases

2. **Настройка:**
   - Установите приложение
   - Откройте MLC Chat
   - Перейдите в "Models" → "Add Model"
   - Найдите Gemma 3 модели

### Поддерживаемые форматы:
- GGUF
- MLC format
- Квантованные версии

## Метод 3: PocketPal AI

### Установка:

1. **Google Play Store:**
   ```
   https://play.google.com/store/apps/details?id=com.pocketpal.ai
   ```

2. **Настройка модели:**
   - Откройте PocketPal AI
   - Нажмите "Download Model"
   - Нажмите "+" → "Add from Hugging Face"
   - Поиск: "google/gemma-2b" или "google/gemma-9b"
   - Выберите GGUF версию для лучшей производительности

## Метод 4: Интеграция в собственное приложение

### Добавление зависимостей (build.gradle):
```groovy
implementation 'com.google.ai:edge-lite:1.2.3'
implementation 'org.tensorflow:tensorflow-lite:2.14.0'
implementation 'org.tensorflow:tensorflow-lite-gpu:2.14.0'
```

### Пример кода:
```java
// Загрузка модели
ModelLoader loader = new ModelLoader(context, "gemma-3n.tflite");
EdgeModel model = loader.load();

// Подготовка входных данных
String prompt = "Привет, как дела?";
Tensor input = Tensor.fromString(prompt);

// Выполнение инференса
Tensor output = model.run(input);
String response = output.getString(0);
```

## Оптимизация производительности

### Рекомендации по устройству:
- **Процессор:** Snapdragon 8 Gen 1+, MediaTek Dimensity 9000+, или Exynos 2200+
- **RAM:** Минимум 8 ГБ для комфортной работы
- **Хранилище:** UFS 3.1 или выше для быстрой загрузки модели

### Настройки оптимизации:
1. **Квантование:** Используйте 4-bit или 8-bit версии
2. **GPU ускорение:** Включите GPU inference если доступно
3. **NPU поддержка:** Используйте специализированные AI чипы
4. **Кэширование:** Предзагружайте модель в память

## Устранение неполадок

### Распространенные проблемы:

1. **Недостаток памяти:**
   - Используйте меньшую модель (2B вместо 9B)
   - Закройте другие приложения
   - Перезагрузите устройство

2. **Медленная генерация:**
   - Включите GPU ускорение
   - Используйте квантованную модель
   - Проверьте температурный режим устройства

3. **Ошибки загрузки:**
   - Проверьте интернет соединение
   - Убедитесь в наличии свободного места
   - Попробуйте перезагрузить приложение

## Сравнение методов

| Метод | Простота установки | Производительность | Настройки | Размер |
|-------|-------------------|-------------------|-----------|--------|
| AI Edge Gallery | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐ | Средний |
| MLC Chat | ⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ | Большой |
| PocketPal AI | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐⭐ | Малый |
| Собственное приложение | ⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | Настраиваемый |

## Заключение

Для большинства пользователей рекомендуется начать с **Google AI Edge Gallery** или **PocketPal AI** как самых простых в использовании вариантов. Для разработчиков, которым нужна максимальная производительность и контроль, лучше использовать **MLC Chat** или интегрировать модель в собственное приложение.

## Полезные ссылки

- [Hugging Face Gemma 3 Collection](https://huggingface.co/collections/google/gemma-3-release-67c6c6f89c4f76621268bb6d)
- [Google AI Edge Gallery GitHub](https://github.com/google-ai-edge/ai-edge-gallery)
- [MLC LLM GitHub](https://github.com/mlc-ai/mlc-llm)
- [PocketPal AI](https://play.google.com/store/apps/details?id=com.pocketpal.ai)